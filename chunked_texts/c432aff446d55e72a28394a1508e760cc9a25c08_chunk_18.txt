on-parametriccomponentinEquation5,itisusuallyprohibitivetouseexhaustive
kNN
kNNsearch,andthusKhandelwaletal.(2020a)useapproximatekNNsearchusingtheFAISSlibrary(Johnson
etal.,2019). TheuseofFAISS(similarlytootherapproximatesearchlibraries)resultsintwovarietiesof
approximation.
• ApproximateNeighbors: Becausethesearchfornearestneighborsisnotexact,thesetofnearest
neighborsmightnotbeequivalenttotheactualnearestneighbors. Recallthefunctionmask-to-k(·)in
Equation5,itisthefunctionwhereweselectthekNNentriesfromthedatastoreW. Wedenote
ds
“realmask”astheaccuratenearestneighborsformask-to-k(·)selection,and“FAISSmask”asthe
approximatenearestneighborsreturnedbytheFAISSlibrary.3
• ApproximateScores: Inaddition,FAISSmakessomeapproximationsincalculatingthedistances
betweenthequeryandtheretrievedneighborsforefficiencypurposes. Wedenote“realscore”asthe
scorescalculatedfromgroundtruthdistancesbetweentheembeddings,and“FAISSscore”asthe
distancesreturnedbyFAISSapproximatesearch.
Thecomparisonofthedifferentapproximationsettingsisshownin Table3. Quitesurprisingly,weactually
findthattheinterpolatedperplexitywithapproximatesearchisbetterthanthatwithexactsearch,bothwith
respecttothemaskandthescorecalculation. Intriguedbythiscounter-intuitiveresult,weexploretheeffectof
kNNsearchapproximation.
h ⊗ +#params PPL λ Interp.PPL Oracle
ds
BaseLM - - 0 21.750 - - -
kNN-LMw/FAISSmask,FAISSscore att L2 N ×D ∞ 0.271 19.174 14.230
ds
kNN-LMw/FAISSmask,realscore