10.
X asthequerysetfortheminibatch,withoutduplicates. The
Q
centroidscanberepresentedasfollows: ∂l ∂l 1
MP = 1 =− (10)
∂s(x,c ) ∂s(x,c ) |X |
1 (cid:88) i Li i Li Q
c = x (3)
Li N Li −1
j
j However,multinomiallosswillassignadynamicweighttoeach
j(cid:54)=i,Lj=Li positivepair. AsshowninEquation11,thisdynamicweightis
dependentonthepairitself,meaningtheharderpositivepairs
ForeachqueryinstanceinX,wecomposethefollowingloss:
Q
withlowersimilaritywouldcontributemoretothelossobjec-
es(xi,cLi) tive.
l(x i)=−log( Lj(cid:80)
(cid:54)=Li
es(xi,cLj)+ (cid:80)
pk
es(xi,pk)) (4) ∂s(∂ xl i1,m
c Li)
=−
1+
e (cid:80)−s(xi e, −cL si (x)
i,cLi)
(11)
Lj∈LM Lpk∈/LM xi∈XQ
Figure1:Contrastive Figure3:Triplet Figure5:(Angular)Prototypical Figure7:ProxyNCA
Figure2:ProxyAnchor Figure4:MPl1loss(Eq.6) Figure6:MPRegulator(Eq.7) Figure8:MMPPositivePairs
Figure9:Eachcolorrepresentsauniqueclass.Solidcirclepointistheentitywhilethetrianglewithaspecificcoloristheproxyofthe
correspondingclass. Thehollowcircleconnectedwithsolidcirclesbydashlinerepresentsthecentroidcomputedbyaveragingthose
entities.For(Angular)PrototypicalorMP(MMP),oneembeddingisreservedasaqueryandotherembeddingsareappliedtocompute
thecentroidregardinge