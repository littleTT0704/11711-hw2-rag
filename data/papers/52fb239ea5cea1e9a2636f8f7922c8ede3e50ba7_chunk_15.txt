ustocreatediverse,compositionalmath formalrepresentationsonly(e.g.,1+1=?) tonatural
problemswithprogramannotationsusingasophis- language(e.g.,“Mariellahas3pears...”).
ticatedgrammar. Wenextpartitiondatasetsbasedonthetypeof
backgroundknowledge,requiredtosolvetheprob-
Expert program annotation. For many
lem. For instance, commonsense questions like
datasets, it is not possible to obtain Python pro-
“Howmanylegsto3peoplehave?” orscienceques-
gramannotationsviaautomatedmethodsdescribed
tionslike“Willwaterboilat200degreesCelsius?”
above;eithertheoriginaldatasetcontainsonlythe
requiredifferentsetsofknowledgetoanswer.
final answer or contains solutions expressed in
Lastly,wecategorizebasedonquestionformat,
free-formnaturallanguage. Forsuchdatasets,we
puttinge.g.,multiplechoicequestionsunderone
obtainannotationsfromexpertswhoareproficient
taskandnaturallanguageinferenceunderanother.
in basic programming and high-school level
Examples of each task and the datasets included
mathematics. SeeAppendixB.1fordetails.
areinAppendixB.
Instructionannotation. Giventheeffectiveness
ofinstructionlearning(Mishraetal.,2022b;Wei 3.3 LI¯LA-OOD
etal.,2021;Mishraetal.,2022a;Sanhetal.,2021) Inordertomeasureifthemodelhastrulylearned
foreffectivegeneralization,wecollectinstruction the underlying mathematical reasoning skill, we
annotationforeachtask. Eachinstructioncontains evaluate both in-distribution (IID, i.e., standard
a definition that clearly defines the task and pro- train-testsplits)andout-of-distribution(OOD)per-
vides guidelines, a prompt that provides a short formanceforeachtask,i.e.,weevaluateonexam-
andstraightforwardinstruction,andexamplesthat plesrequiringthesameunderlyingmathematical
facilitatelearningby