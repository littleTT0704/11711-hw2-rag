 the final score is the F score, computed
1
referencecode,andthewayf ranksdifferentcan- astheharmonicmeanofprecisionandrecall.
edoC
ecnerefeR
1 (cid:88)
CodeBERTScore = max sim(y∗,yˆ ) (4)
P |yˆ[mˆ]| y∗ ∈y∗[m∗] i j
yˆj∈yˆ[mˆ] i
1 (cid:88)
CodeBERTScore = max sim(y∗,yˆ ) (5)
R |y∗[m]|
y∗∈y∗[m∗]yˆj ∈yˆ[mˆ]
i j
i
2·CodeBERTScore ·CodeBERTScore
P R
CodeBERTScore = (6)
F1
CodeBERTScore +CodeBERTScore
P R
10·CodeBERTScore ·CodeBERTScore
P R
CodeBERTScore = (7)
F3
9·CodeBERTScore +CodeBERTScore
P R
Figure3: MainequationsforCodeBERTScore
2.3 CodeBERTScore enizedsequence,resultinginsequencesofvectors:
OurapproachgenerallyfollowsBERTScore,with B(⟨x,...,x,y∗,...,y∗ ⟩)=⟨x,...,x,y∗,...,y∗ ⟩
1 k 1 m 1 k 1 m
thefollowingmaindifferences:
B(⟨x,...,x,yˆ,...,yˆ ⟩)=⟨x,...,x,yˆ,...,yˆ ⟩
1 k 1 n 1 k 1 n
1. We encode the context (the natural language (2)
instruction or comment) along with each of Finally, we mask out the encoded context tokens
the generated and reference code snippets, x,...,x as well as all non-alphanumeric tokens
1 k
but without using the encoded context in the (parentheses, brackets, dots, commas, whites-
finals