k
equivalent code snippets. Intuitively, a similar-
Ref:shutil.rmtree(folder) ityfunctionf thatcandistinguishbetweensimilar
and dissimilar code will produce d larger than 1,
Candidate CodeBERTScore chrF
meaningthatapairofcodesnippetsfromthesame
os.rmdir(folder) 1st 1st
semanticclusterhasahighersimilarityscorethan
os.rmdir(f) 2nd 3rd
(folder) 3rd 2nd apairofsnippetsfromdifferentclusters. Sincethe
number of intra-class and inter-class pairs grows
Figure 7: The similarity rankings of three quadraticallywiththenumberofcodesnippets,in
code snippets given the reference code our experiments we followed Eghbali and Pradel
shutil.rmtree(folder). While Code-
(2022) to sample N inter- and N intra-class pairs
BERTScore correctly ranks os.rmdir(f) over
instead.
the the non-equivalent (folder), chrF prefers just
(folder)overos.rmdir(f).
F.2 DatasetwithSemanticallyequivalent
clusters
WeconductedaqualitativeevaluationofCode-
We follow Eghbali and Pradel (2022) to evaluate
BERTScore under various perturbations. An
whether CodeBERTScore can distinguish similar
example is shown in Figure 7, which shows
and dissimilar code mined from ShareCode9, an
the CodeBERTScore and chrF rankings of
onlinecodingcompetitionplatform. Semantically
three code snippets based on the similarity
equivalentcodesnippetsarefromthesamecoding
to the reference shutil.rmtree(folder).
problem, and they all pass the unit tests provided
CodeBERTScore gives a higher ranking to
by the platform. The dataset consists 6958 code
the code snippet that employs the appropriate
API(os.rmdir)thanthetrivial(folder)that 9https://sharecode.io/
Java C++ Python JavaScript
Metric τ r τ r τ r τ r
s s s s
BLEU.481(±.030).361(±.037).