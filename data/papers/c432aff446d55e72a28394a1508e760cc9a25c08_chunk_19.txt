 att L2 N ×D ∞ 0.176 19.672 14.393
ds
kNN-LMw/realmask,realscore att L2 N ×D ∞ 0.172 19.735 14.480
ds
Table3: PerformanceoftheparametriclanguagemodelandcomparisonofkNN-LMsusingtheapproximate
versusgroundtruthkNN.
First,weplotthesubsampledsizeofthedatastorewiththeinterpolatedperplexityFigure4,asimilarplot
toFigure2,butshowcasingthecomparisonbetweenapproximateandrealmasks,betweenapproximateand
realscoresinboththefulldatastoreaswellasasmallsubsampleddatastoresetting. Wefindthatusingan
approximateFAISSmasktofindnearestneighborsisbetterthanusingthegroundtruthnearestneighborsand
thatusingtheapproximatescorereturnedbyFAISSisbetterthanrecomputingthegroundtruthdistances
3Tocalculatetherealmaskoveralargedatastore,weshardthedatastoreintoseveralsmallerdatastores,calculatethe
nearestneighborsforeachofthesmallerdatastores,andcombinethembacktogethertogetthefinalresult.
8
ytixelpreP
detalopretnI
between embeddings for the kNN distribution at different levels of datastore size, both at 5% or 100%.
Interestingly,thegapbetweenusinganapproximatescoreorrealscoregiventhesameapproximatenearest
neighbors (“FAISS mask, FAISS score” vs. “FAISS mask, real score”) is larger than that between using
approximateorrealnearestneighborsgiventhesamegroundtruthmethodofcalculatingthedistance(“real
mask,realscore”vs. “FAISSmask,realscore”),forreasonswewillelucidateinthenextsection.
FAISS mask, FAISS score FAISS mask, real score real mask, real score
22.000
21.000
20.000
19.000
0.00 0.